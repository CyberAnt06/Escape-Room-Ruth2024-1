<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        #sudoku-board {
            display: grid;
            grid-gap: 5px;
            margin-bottom: 20px;
        }

        .sudoku-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            font-size: 24px; /* Ajuste o tamanho da fonte se necess√°rio */
            cursor: pointer;
            width: 50px; /* Ajuste o tamanho da c√©lula se necess√°rio */
            height: 50px;
        }

        .selected {
            border: 2px solid blue;
        }

        .immutable {
            background-color: #ddd;
            pointer-events: none;
        }

        #image-buttons {
            margin: 20px;
            display: flex;
            gap: 10px;
        }

        .image-button {
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 24px; /* Ajuste o tamanho da fonte se necess√°rio */
        }

        #submit-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        /* Estilo para a imagem de pr√™mio em tela cheia */
        #full-screen-image {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-position: center;
            z-index: 9999;
        }
    </style>
</head>
<body>

<h1></h1>

<div id="sudoku-board"></div>

<div id="image-buttons"></div>

<button id="submit-button">Enviar</button>

<!-- Div para exibir a imagem em tela cheia -->
<div id="full-screen-image"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
    let boardSize = 5; // Tamanho do tabuleiro come√ßa com 5x5 para o n√≠vel 1
    const sudokuBoard = document.getElementById('sudoku-board');
    const imageButtons = document.getElementById('image-buttons');
    const submitButton = document.getElementById('submit-button');
    const fullScreenImage = document.getElementById('full-screen-image'); // Elemento da imagem em tela cheia
    let selectedCell = null; // Guarda a c√©lula selecionada
    let level = 1; // Come√ßa no n√≠vel 1
    let images = []; // As imagens s√£o inicializadas com base no n√≠vel

    // Imagens para o Sudoku de acordo com o n√≠vel (emojis para ambos os n√≠veis)
    const level1Images = ['üòç', 'üòÇ', 'ü§Æ', 'üò°', 'üò≠'];
    const level2Images = ['üü©', 'üü•', 'üü¶', 'üü®', 'üüß', 'üü™', '‚¨õ', '‚¨ú', 'üü´'];

    // Gabarito do Sudoku para o n√≠vel 1 (5x5)
    const solutionGridLevel1 = [
        [1, 2, 3, 4, 5],
        [5, 3, 4, 1, 2],
        [4, 5, 2, 3, 1],
        [3, 1, 5, 2, 4],
        [2, 4, 1, 5, 3]
    ];

    // Configura√ß√£o inicial do Sudoku para o n√≠vel 1 (5x5)
    const sudokuGridLevel1 = [
        [1, 0, 3, 0, 5],
        [0, 3, 4, 1, 0],
        [0, 5, 0, 3, 1],
        [3, 0, 5, 0, 4],
        [0, 4, 0, 5, 0]
    ];

    // Gabarito do Sudoku para o n√≠vel 2 (9x9)
    const solutionGridLevel2 = [
        [5, 3, 4, 6, 7, 8, 9, 1, 2],
        [6, 7, 2, 1, 9, 5, 3, 4, 8],
        [1, 9, 8, 3, 4, 2, 5, 6, 7],
        [8, 5, 9, 7, 6, 1, 4, 2, 3],
        [4, 2, 6, 8, 5, 3, 7, 9, 1],
        [7, 1, 3, 9, 2, 4, 8, 5, 6],
        [9, 6, 1, 5, 3, 7, 2, 8, 4],
        [2, 8, 7, 4, 1, 9, 6, 3, 5],
        [3, 4, 5, 2, 8, 6, 1, 7, 9]
    ];

    // Configura√ß√£o inicial do Sudoku para o n√≠vel 2 (9x9)
    const sudokuGridLevel2 = [
        [5, 3, 0, 0, 7, 0, 0, 1, 0],
        [6, 0, 0, 1, 9, 5, 0, 0, 0],
        [0, 9, 8, 0, 0, 0, 5, 6, 0],
        [8, 0, 9, 0, 6, 0, 0, 0, 3],
        [4, 0, 6, 8, 0, 3, 0, 0, 1],
        [7, 0, 0, 0, 2, 0, 0, 0, 6],
        [0, 6, 0, 0, 0, 0, 2, 8, 0],
        [0, 0, 0, 4, 1, 9, 0, 0, 5],
        [0, 4, 0, 0, 8, 0, 0, 7, 9]
    ];

    // Vari√°veis que mudar√£o dinamicamente
    let sudokuGrid = sudokuGridLevel1;
    let solutionGrid = solutionGridLevel1;

    // Renderiza o tabuleiro de Sudoku
    function renderSudokuBoard() {
        sudokuBoard.innerHTML = ''; // Limpa o tabuleiro

        // Define o tamanho da grid conforme o n√≠vel
        sudokuBoard.style.gridTemplateColumns = `repeat(${boardSize}, 50px)`; // Corrigido

        for (let row = 0; row < boardSize; row++) {
            for (let col = 0; col < boardSize; col++) {
                const cell = document.createElement('div');
                cell.classList.add('sudoku-cell');
                cell.dataset.row = row;
                cell.dataset.col = col;

                if (sudokuGrid[row][col] !== 0) {
                    cell.classList.add('immutable');
                    cell.textContent = images[sudokuGrid[row][col] - 1];
                }

                // Selecionar c√©lula ao clicar
                cell.addEventListener('click', () => {
                    if (selectedCell) {
                        selectedCell.classList.remove('selected');
                    }
                    selectedCell = cell;
                    selectedCell.classList.add('selected');
                });

                sudokuBoard.appendChild(cell);
            }
        }
    }

    // Renderiza os bot√µes de sele√ß√£o de imagens
    function renderImageButtons() {
        imageButtons.innerHTML = ''; // Limpa os bot√µes

        images.forEach((image, index) => {
            const button = document.createElement('div');
            button.classList.add('image-button');
            button.textContent = image;

            // Ao clicar em uma imagem, coloca na c√©lula selecionada
            button.addEventListener('click', () => {
                if (selectedCell) {
                    const row = selectedCell.dataset.row;
                    const col = selectedCell.dataset.col;
                    sudokuGrid[row][col] = index + 1; // Atualiza a c√©lula com o valor da imagem
                    selectedCell.textContent = image;
                    selectedCell.classList.remove('selected');
                    selectedCell = null; // Desmarca a c√©lula
                }
            });

            imageButtons.appendChild(button);
        });
    }

    // Verifica se o Sudoku est√° correto
    function checkWinCondition() {
        for (let row = 0; row < boardSize; row++) {
            for (let col = 0; col < boardSize; col++) {
                if (sudokuGrid[row][col] !== solutionGrid[row][col]) {
                    alert('Sudoku incorreto. Tente novamente.');
                    return;
                }
            }
        }
        alert('Sudoku correto! Parab√©ns!');

        // Se vencer no n√≠vel 1, inicia o n√≠vel 2
        if (level === 1) {
            startLevel2();
        } else if (level === 2) {
            showPrize(); // Exibe o pr√™mio ao completar o n√≠vel 2
        }
    }

    // Inicia o n√≠vel 1
    function startLevel1() {
        boardSize = 5;
        sudokuGrid = sudokuGridLevel1;
        solutionGrid = solutionGridLevel1;
        images = level1Images;
        renderSudokuBoard();
        renderImageButtons();
    }

    // Inicia o n√≠vel 2
    function startLevel2() {
        level = 2;
        boardSize = 9;
        sudokuGrid = sudokuGridLevel2;
        solutionGrid = solutionGridLevel2;
        images = level2Images;
        renderSudokuBoard();
        renderImageButtons();
    }

    // Exibe a imagem de pr√™mio em tela cheia
    function showPrize() {
        alert('Parab√©ns! Seu pr√™mio √© esta imagem!');
        fullScreenImage.style.display = 'block'; // Exibe a imagem

        // Define a imagem de fundo do pr√™mio
        fullScreenImage.style.backgroundImage = 'url("Imagens/enigma.png")';
    }

    // Bot√£o de envio para verificar a condi√ß√£o de vit√≥ria
    submitButton.addEventListener('click', checkWinCondition);

    // Come√ßa no n√≠vel 1
    startLevel1();
</script>

</body>
</html>